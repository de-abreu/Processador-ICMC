import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { Highlight } from '@site/src/components/Highlight'

# Simulator

Software that graphically simulates the result of executing a given program, as if it was written in the ICMC processor's memory.

It is available in two versions:

- **"*Original*":** has the `gtk2` and `ncurses` packages as dependencies, which must be installed (recommended with the package manager of your distribution) before it can be used.

- **Browser:** can be used directly in a graphical browser. This was tested on the Firefox (v129.0.1, 64-bit) and Chromium (v127.0.6533.119, 64-bit) browsers;

:::info
Only the original simulator needs to be installed to be used, the browser simulator is accessible at https://thiagoambiel.github.io/SimuladorICMC/. Nevertheless, the installation process for both versions is described below, so that they can be used locally.
:::
## Installation

Run the following commands in your terminal:

<Tabs>
    <TabItem value="Original">
        ```bash
        wget https://github.com/de-abreu/Processador-ICMC/raw/master/simulator/original_simulator.zip
        unzip original_simulator.zip
        cd original
        gcc *.c -o sim
        ```
        With this, you will have the executable `sim`. Take it to the directory where you are working, as convenient.

    </TabItem>
    <TabItem value="Browser">
        :::warning
        It is assumed by the `open` command that the browser to be used is the one defined as the default for the user in question.
        :::

        ```bash
        wget https://github.com/de-abreu/Processador-ICMC/raw/master/simulator/browser_simulator.zip
        unzip browser_simulator.zip
        open browser/index.html
        ```
    </TabItem>
</Tabs>


## Usage

### Files required for simulation
The simulators require a pair of `.mif` files to operate on: the first referring to the program - generated by the [assembler](/docs/componentes/montador) - and the second to the corresponding [charmap](/docs/guias/charmaps), respectively. For the original simulator, these can be passed according to the command

```bash
./sim programa.mif charmap.mif
```

While the browser simulator, when opened, presents a graphical interface that allows navigation through the file manager to select these same files.

:::tip
After installation, consider downloading the [HelloMom](https://github.com/de-abreu/Processador-ICMC/assembly-software/HelloMom/HelloMom.mif) program and its [charmap](https://github.com/de-abreu/Processador-ICMC/assembly-software/HelloMom/charmap.mif) and running the simulator with these to test if it is working.
:::

### Description of the graphical interface

Both simulators have similar interfaces, which should feature the following two components:

![Frogger Demake game running on the original simulator](/img/simulador.svg)
- **<Highlight color="#26762b">Registers</Highlight>** At the top, the values stored in the registers are described.
- **<Highlight color="#64272b">Instructions</Highlight>** The current instruction being read (first line) and the next instructions stored in memory.

:::note
To learn what the **registers** described by the simulator are and what they do, consult the [section on registers in the processor page](/docs/componentes/processador/#registers).
:::

:::info Do you want to know more?
At the time of writing this document, there are several alternative simulators developed by ICMC students. Among them:
- [OpenGL_Simulator](https://github.com/de-abreu/Processador-ICMC/blob/master/simulator/opengl/README.md) by Breno Queiroz and Maria Eduarda Moreira;
- [goICMCsim](https://github.com/lucasgpulcinelli/goICMCsim) by Lucas Pulcinelli;
- [ICMC's CPU Emulator](https://proc.giroto.dev/) by Vinicius Giroto (this is an IDE that contains its own simulator).
:::

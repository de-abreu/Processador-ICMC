"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7179],{1278:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var t=s(4848),r=s(8453);const i={title:"How to Use",description:"Considerations on the syntax and resources of the language"},a="How to Use",o={id:"linguagem-assembly/como-usar",title:"How to Use",description:"Considerations on the syntax and resources of the language",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/3-linguagem-assembly/1-como-usar.md",sourceDirName:"3-linguagem-assembly",slug:"/linguagem-assembly/como-usar",permalink:"/Processador-ICMC/en/docs/linguagem-assembly/como-usar",draft:!1,unlisted:!1,editUrl:"https://github.com/de-abreu/Processador-ICMC/tree/master/website/docs/3-linguagem-assembly/1-como-usar.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"How to Use",description:"Considerations on the syntax and resources of the language"},sidebar:"tutorialSidebar",previous:{title:"Linguagem Assembly",permalink:"/Processador-ICMC/en/docs/category/linguagem-assembly"},next:{title:"Instruction List",permalink:"/Processador-ICMC/en/docs/linguagem-assembly/instrucoes"}},l={},d=[{value:"Comments",id:"comments",level:2},{value:"Instructions",id:"instructions",level:2},{value:"Immediate Values",id:"immediate-values",level:2},{value:"Registers",id:"registers",level:2},{value:"General-Purpose Registers",id:"general-purpose-registers",level:3},{value:"Flag Register",id:"flag-register",level:3},{value:"Stack Pointer",id:"stack-pointer",level:3},{value:"Program Counter",id:"program-counter",level:3},{value:"The Stack",id:"the-stack",level:2},{value:"Labels",id:"labels",level:2},{value:"Variables",id:"variables",level:2},{value:"var",id:"var",level:3},{value:"static",id:"static",level:3},{value:"string",id:"string",level:3},{value:"Functions",id:"functions",level:2},{value:"Optional attributes of a function",id:"optional-attributes-of-a-function",level:3},{value:"Arguments and return value",id:"arguments-and-return-value",level:4},{value:"Saving and restoring the context of registers",id:"saving-and-restoring-the-context-of-registers",level:4},{value:"Loops",id:"loops",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"how-to-use",children:"How to Use"})}),"\n",(0,t.jsxs)(n.p,{children:["The ICMC assembly language is of type ",(0,t.jsx)(n.a,{href:"https://pt.wikipedia.org/wiki/RISC",children:"RISC"})," with 16-bit words. It only allows characters present in the ASCII standard."]}),"\n",(0,t.jsx)(n.h2,{id:"comments",children:"Comments"}),"\n",(0,t.jsxs)(n.p,{children:["Comments are segments of text preceded by the character ",(0,t.jsx)(n.code,{children:";"}),". All text after this character, and until the end of the line, is ignored in the assembly process. Comments are a powerful tool to make the assembly code and its intention more intelligible to the reader. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"mov r0, r1 ; Register 0 receives the content of register 1\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"The ASCII standard does not allow accented characters. However, using them in comments is still possible, since they are ignored in the assembly process."})}),"\n",(0,t.jsx)(n.h2,{id:"instructions",children:"Instructions"}),"\n",(0,t.jsx)(n.p,{children:"Instructions are declared by their name, followed by their arguments (if any), separated by commas. For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"add r0, r1, r2 ; r0 receives the sum of the values in r1 and r2\nhalt           ; Ends the program execution, does not receive arguments\n"})}),"\n",(0,t.jsx)(n.p,{children:"The arguments for instructions are:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.a,{href:"#registers",children:[(0,t.jsx)(n.strong,{children:"general-purpose registers"})," (",(0,t.jsx)(n.code,{children:"r0"})," to ",(0,t.jsx)(n.code,{children:"r7"}),")"]}),": load the values stored in these registers;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#labels",children:(0,t.jsx)(n.strong,{children:"labels"})}),": load the values stored in the memory positions pointed to by these labels;"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"immediate values"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"immediate-values",children:"Immediate Values"}),"\n",(0,t.jsxs)(n.p,{children:["Values preceded by ",(0,t.jsx)(n.code,{children:"#"}),", which can be:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Any positive integer ",(0,t.jsx)(n.strong,{children:"x"})," such that 0 \u2264 x < 65535 (numbers that can be represented in up to 16 bits, without a sign bit). For example:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"loadn r0, #0 ; loads the value zero into r0\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Alphanumeric characters, ",(0,t.jsx)(n.code,{children:"."}),", ",(0,t.jsx)(n.code,{children:"_"}),", and special characters:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"\\\\"}),": backslash"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"\\n"}),": newline"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"\\0"}),": null character"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'\\"'}),": double quotes"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"loadn r0, #'c' ; loads the ASCII index value for the character c into register r0\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Memory addresses pointed to by labels. For example:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:'loadn r0, #hello ; loads the index of the memory position pointed to by the label "hello".\n'})}),"\n",(0,t.jsx)(n.h2,{id:"registers",children:"Registers"}),"\n",(0,t.jsx)(n.p,{children:"Memory addresses designated for storing data being processed, given the speed at which these can be accessed. These are:"}),"\n",(0,t.jsx)(n.h3,{id:"general-purpose-registers",children:"General-Purpose Registers"}),"\n",(0,t.jsxs)(n.p,{children:["Indicated by ",(0,t.jsx)(n.code,{children:"rx"}),", where ",(0,t.jsx)(n.code,{children:"x"})," is an integer from 0 to 7. Used for temporary storage of values to be processed."]}),"\n",(0,t.jsx)(n.h3,{id:"flag-register",children:"Flag Register"}),"\n",(0,t.jsxs)(n.p,{children:["Indicated by ",(0,t.jsx)(n.code,{children:"fr"}),", assumes certain values to denote when"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the last comparison (",(0,t.jsx)(n.code,{children:"cmp"}),") has a result","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"equal"}),"\n",(0,t.jsx)(n.li,{children:"greater"}),"\n",(0,t.jsx)(n.li,{children:"less"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["the last arithmetic operation","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"results in zero"}),"\n",(0,t.jsx)(n.li,{children:"results in a negative number"}),"\n",(0,t.jsxs)(n.li,{children:["results in an ",(0,t.jsx)(n.a,{href:"https:/.wikipedia.org/wiki/Integer_overflow",children:"overflow"})]}),"\n",(0,t.jsx)(n.li,{children:"is a division by zero"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["The flag register is used in commands of the type call and jump; and consequently in the creation of ",(0,t.jsx)(n.a,{href:"#functions",children:"functions"})," and ",(0,t.jsx)(n.a,{href:"#loops",children:"loops"}),"."]})}),"\n",(0,t.jsx)(n.h3,{id:"stack-pointer",children:"Stack Pointer"}),"\n",(0,t.jsxs)(n.p,{children:["Indicated by ",(0,t.jsx)(n.code,{children:"sp"}),", indicates the top of the ",(0,t.jsx)(n.a,{href:"#the-stack",children:"stack"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"program-counter",children:"Program Counter"}),"\n",(0,t.jsxs)(n.p,{children:["Indicated by ",(0,t.jsx)(n.code,{children:"pc"}),", indicates the memory address of the next instruction to be executed."]}),"\n",(0,t.jsx)(n.h2,{id:"the-stack",children:"The Stack"}),"\n",(0,t.jsx)(n.p,{children:"A data structure that allows sequential storage of data in memory. This data can later be accessed in reverse order of how it was stored."}),"\n",(0,t.jsx)(n.p,{children:"This can be done as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"push r0 ; Decreases the address in the sp register by one position and stores the data in r0 in the memory address described by sp.\npop r1  ; Stores in r1 the data in the memory address described by sp and increments sp by one position.\n"})}),"\n",(0,t.jsxs)(n.p,{children:["As a result of this operation, a copy of the data in ",(0,t.jsx)(n.code,{children:"r0"})," is made to ",(0,t.jsx)(n.code,{children:"r1"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"The stack is commonly used as a means of [saving and restoring the context] of the registers when using nested functions."})}),"\n",(0,t.jsx)(n.h2,{id:"labels",children:"Labels"}),"\n",(0,t.jsxs)(n.p,{children:["Names designated to reference specific memory positions. All words followed by the character ",(0,t.jsx)(n.code,{children:":"})," will be interpreted as labels."]}),"\n",(0,t.jsx)(n.p,{children:"As we will see below, this is a useful resource for a variety of purposes, such as declaring variables, functions, and loops."}),"\n",(0,t.jsx)(n.h2,{id:"variables",children:"Variables"}),"\n",(0,t.jsx)(n.p,{children:"Variables can be created using the following commands:"}),"\n",(0,t.jsx)(n.h3,{id:"var",children:"var"}),"\n",(0,t.jsx)(n.p,{children:"Receives a positive number and allocates a number of memory positions. Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"aux : var #1  ; Variable 'aux'\nvet : var #10 ; Vector 'vet' of 10 positions\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The values of variables can be retrieved or assigned using commands of the type ",(0,t.jsx)(n.em,{children:"load"})," and ",(0,t.jsx)(n.em,{children:"store"}),", seen ",(0,t.jsx)(n.a,{href:"/docs/linguagem-assembly/instrucoes",children:"later"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"static",children:"static"}),"\n",(0,t.jsx)(n.p,{children:"Receives an address (or label that points to it), and an immediate value, and at assembly time writes it to the described memory address. Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"WIDTH : var #1\n    static WIDTH, #40\n\nHEIGHT : var #1\n    static HEIGHT, #30\n"})}),"\n",(0,t.jsx)(n.p,{children:"The code above declares a pair of variables to store the screen dimensions."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"static"})," can also be used in conjunction with vectors, assigning an offset to the base address. Example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"pond : var #8\n    static pond + #0, #2626\n    static pond + #1, #2626\n    static pond + #2, #3138\n    static pond + #3, #3138\n    static pond + #4, #3138\n    static pond + #5, #3138\n    static pond + #6, #2626\n    static pond + #7, #2626\npond_length : var #1\n    static pond_length, #8\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The code above creates a vector of eight positions and traverses it from start to finish, storing the immediate values ",(0,t.jsx)(n.code,{children:"2626"})," or ",(0,t.jsx)(n.code,{children:"3138"}),". An auxiliary variable is also created to store the value of the vector size."]}),"\n",(0,t.jsx)(n.h3,{id:"string",children:"string"}),"\n",(0,t.jsx)(n.p,{children:"Receives a text described in double quotes and"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Allocates a number of memory positions equivalent to the number of characters in it +1 and"}),"\n",(0,t.jsxs)(n.li,{children:["Fills these memory positions with the characters in sequence, finally adding the terminal character ",(0,t.jsx)(n.code,{children:"\\0"}),"by the end of it. Example:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:'how_to_play0: string "HOW TO PLAY"\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsxs)(n.p,{children:["The commands ",(0,t.jsx)(n.code,{children:"var"}),", ",(0,t.jsx)(n.code,{children:"static"}),", and ",(0,t.jsx)(n.code,{children:"string"})," were made to be read at ",(0,t.jsx)(n.strong,{children:"assembly time"}),", and ",(0,t.jsx)(n.strong,{children:"not"})," during execution. To avoid unintended consequences, segment your code into two parts: one for data and another for instructions. Example:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"jmp main ; Moves the program counter to the memory position of the main function\n\n; Data segment\n\nmain:    ; Continues code execution from this point\n\n; Instruction segment\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,t.jsxs)(n.p,{children:['By "function", we refer to a portion of instructions that, together, perform a specific purpose. Such portions are initiated with a label that names the function and allows it to be invoked by instructions ',(0,t.jsx)(n.a,{href:"/docs/linguagem-assembly/instrucoes#call",children:(0,t.jsx)(n.code,{children:"call"})}),", and terminated with the instruction ",(0,t.jsx)(n.code,{children:"rts"}),", which returns the ",(0,t.jsx)(n.code,{children:"pc"})," to the position following the ",(0,t.jsx)(n.code,{children:"call"})," instruction that invoked the function. An example of a function would be:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-asmatmel",children:"screenOffset:\n    ; Gives the offset that, given the screen's dimensions, corresponds to a given column and row. Values beyond the screen's HEIGHT and WIDTH get wrapped around.\n    ; Arguments:\n    ; Arg1 = row\n    ; Arg2 = column\n    ; Returns:\n    ; Ret = offset\n\n    call saveRegisters\n    load r3, HEIGHT\n    load r4, WIDTH\n    mod r1, r1, r3\n    mul r1, r1, r4\n    mod r2, r2, r4\n    add r1, r1, r2\n    store a0, r1\n    call restoreRegisters\n    rts\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Functions can be called by other functions. As seen above, the functions ",(0,t.jsx)(n.code,{children:"saveRegisters"})," and ",(0,t.jsx)(n.code,{children:"restoreRegisters"})," are called by ",(0,t.jsx)(n.code,{children:"screenOffset"})]}),"\n",(0,t.jsx)(n.h3,{id:"optional-attributes-of-a-function",children:"Optional attributes of a function"}),"\n",(0,t.jsx)(n.p,{children:"The following attributes are optional, but recommended, in the construction of a function."}),"\n",(0,t.jsx)(n.h4,{id:"arguments-and-return-value",children:"Arguments and return value"}),"\n",(0,t.jsx)(n.p,{children:'Functions usually receive one or more values as "arguments" and "return" a single output value as a result of their operation. Such values can be stored in registers, but it is recommended that they be read and written in memory, since registers are scarce.'}),"\n",(0,t.jsx)(n.p,{children:"The assembler already provides some special labels of optional use for this purpose:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Argx"}),", where ",(0,t.jsx)(n.code,{children:"x"})," is an integer from 0 to 9: used to store function arguments."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Ret"}),": used to store the function return."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"saving-and-restoring-the-context-of-registers",children:"Saving and restoring the context of registers"}),"\n",(0,t.jsx)(n.p,{children:"Saving the context of registers consists of storing their current values on the stack at the start of a function and restoring their context consists of restoring the values from the stack at the end of the function. This is important so that nested functions do not interfere with the operation of the functions that called them, after they have executed."}),"\n",(0,t.jsxs)(n.p,{children:["The functions ",(0,t.jsx)(n.a,{href:"/docs/biblioteca/funcoes#saveregisters",children:"saveRegisters"})," and ",(0,t.jsx)(n.a,{href:"/docs/biblioteca/funcoes#restoreregisters",children:"restoreRegisters"})," can be used at the beginning and end of each function to fulfill this purpose."]}),"\n",(0,t.jsx)(n.h2,{id:"loops",children:"Loops"}),"\n",(0,t.jsxs)(n.p,{children:["Segments of instructions executed repeatedly until a condition, if any, is satisfied. Similar to the commands ",(0,t.jsx)(n.code,{children:"for"}),", ",(0,t.jsx)(n.code,{children:"while"}),", or ",(0,t.jsx)(n.code,{children:"do while"}),", and equivalent to the ",(0,t.jsx)(n.code,{children:"goto"})," command. This is done through instructions ",(0,t.jsx)(n.a,{href:"/docs/linguagem-assembly/instrucoes#jump",children:(0,t.jsx)(n.code,{children:"jmp"})}),", for example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"; Prints an integer value on the screen, with right alignment.\n;\n; Arguments:\n; Arg1 = Integer value to be printed\n; Arg2 = Position on the screen from where to start printing\n; Arg3 = Color value to print the number\n;\n; Returns: Nothing\n\nprintIntR:\n    call saveRegisters\n    loadn r4, #10        ; loads the value 10 to apply the modulo operation\n    loadn r5, #'0'       ; loads the index value of the character 0\n\n    pirLoop:    ; starts the printing loop\n        mod r6, r1, r4   ; gets the least significant digit of r1\n        add r6, r5, r6   ; applies it as an offset to the character map\n        add r6, r6, r3   ; applies the color value\n        outchar r6, r2   ; prints the character at position r2\n        div r1, r1, r4   ; integer division of r1 by 10\n        jz pirEnd        ; exits the loop if r1 = 0\n        dec r2           ; otherwise, decrements r2\n        jmp pirLoop      ; and continues\n\n    pirEnd:\n        call restoreRegisters\n        rts\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);